/**
 * nya-bootstrap-select v2.0.10
 * Copyright 2014 Nyasoft
 * Licensed under MIT license
 */
!function(){"use strict";function a(){return++j}function b(a){return a&&a.window===a}function c(a){return"string"==typeof a}function d(a){if(null==a||b(a))return!1;var d=a.length;return 1===a.nodeType&&d?!0:c(a)||Array.isArray(a)||0===d||"number"==typeof d&&d>0&&d-1 in a}function e(){return Object.create(null)}function f(b,c){var d,e=typeof b;return"function"==e||"object"==e&&null!==b?"function"==typeof(d=b.$$hashKey)?d=b.$$hashKey():void 0===d&&(d=b.$$hashKey=(c||a)()):d=b,e+":"+d}function g(a,b,c){var d,e,f=[],g=[];for(d=0;d<b.length;d++)for(e=0;e<a.length;e++)a[e][c]?a[e][c]===b[d]&&g.push(a[e]):f.push(a[e]);return g=g.concat(f)}function h(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return angular.element(d)}function i(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}var j=0,k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]},m=function(a,b,c,d,e,f,g,h){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b)),h&&(a.$group=h)},n=function(a,b){var c,d=a.length;if(0===d)return!1;for(c=0;d>c;c++)if(v(b,a[c]))return!0;return!1},o=function(a,b){var c,d=a.length;if(0===d)return-1;for(c=0;d>c;c++)if(v(b,a[c]))return c;return-1},p=function(a,b,c){var d,e=a,f=typeof c;if(a==b)return null;do if("string"===f){if(d=" "+e.className+" ",1===e.nodeType&&d.replace(/[\t\r\n\f]/g," ").indexOf(c)>=0)return e}else if(e==c)return e;while((e=e.parentNode)&&e!=b&&9!==e.nodeType);return null},q=function(a){var b,c=a.className.replace(/[\t\r\n\f]/g," ").trim();b=c.split(" ");for(var d=0;d<b.length;d++)/\s+/.test(b[d])&&(b.splice(d,1),d--);return b},r=function(a,b){var c=q(a);return-1!==c.indexOf(b)},s=function(a,b){var c,d,e,f=a.children(),g=f.length;if(g>0)for(var h=0;g>h;h++){if(c=f.eq(h),d=!0,e=q(c[0]),e.length>0)for(var i=0;i<b.length;i++)if(-1===e.indexOf(b[i])){d=!1;break}if(d)return c}return[]},t=function(a,b){var c,d,e;if(-1!==a.text().toLowerCase().indexOf(b.toLowerCase()))return!0;for(c=a.children(),e=c.length,d=0;e>d;d++)if(-1!==c.eq(d).text().toLowerCase().indexOf(b.toLowerCase()))return!0;return!1},u=angular.element,v=angular.equals,w=angular.copy,x=angular.extend,y=angular.module("nya.bootstrap.select",[]);y.provider("nyaBsConfig",function(){var a=null,b={"en-us":{defaultNoneSelection:"Nothing selected",noSearchResult:"NO SEARCH RESULT",numberItemSelected:"%d item selected",selectAll:"Select All",deselectAll:"Deselect All"}},c=w(b);this.setLocalizedText=function(a,b){if(!a)throw new Error("localeId must be a string formatted as languageId-countryId");c[a]||(c[a]={}),c[a]=x(c[a],b)},this.useLocale=function(b){a=b},this.$get=["$locale",function(d){var e;return e=a?c[a]:c[d.id],e||(e=b["en-us"]),e}]}),y.controller("nyaBsSelectCtrl",function(){var a=this;a.keyIdentifier=null,a.valueIdentifier=null,a.isMultiple=!1,a.onCollectionChange=function(){},a.setId=function(b){a.id=b||"id#"+Math.floor(1e4*Math.random())}}),y.directive("nyaBsSelect",["$parse","$document","$timeout","nyaBsConfig",function(a,b,c,d){var e="Nothing selected",f='<button class="btn btn-default dropdown-toggle" type="button"><span class="pull-left filter-option"></span>&nbsp;<span class="caret"></span></button>',g='<div class="dropdown-menu open"></div>',h='<div class="bs-searchbox"><input type="text" class="form-control"></div>',j='<ul class="dropdown-menu inner"></ul>',k='<li class="no-search-result"><span>NO SEARCH RESULT</span></li>',l='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button class="actions-btn bs-select-all btn btn-default">SELECT ALL</button><button class="actions-btn bs-deselect-all btn btn-default">DESELECT ALL</button></div></div>';return{restrict:"ECA",require:["ngModel","nyaBsSelect"],controller:"nyaBsSelectCtrl",compile:function(m,x){m.addClass("btn-group");var y,z,A,B,C,D,E,F=function(){var a;return a=x.titleTpl?u(x.titleTpl):x.title?document.createTextNode(x.title):K.defaultNoneSelectionTpl?u(K.defaultNoneSelectionTpl):document.createTextNode(K.defaultNoneSelection?K.defaultNoneSelection:e)},G=m.children(),H=u(f),I=u(g),J=u(j),K=d,L="undefined"!=typeof x.multiple;for(B=q(m[0]),B.forEach(function(a){/btn-(?:primary|info|success|warning|danger|inverse)/.test(a)&&(m.removeClass(a),H.removeClass("btn-default"),H.addClass(a)),"form-control"===a&&H.addClass(a)}),J.append(G),C=G.length,D=0;C>D;D++)E=G.eq(D),(E.hasClass("nya-bs-option")||E.attr("nya-bs-option"))&&E.find("a").attr("tabindex","0");return"true"===x.liveSearch&&(y=u(h),K.noSearchResultTpl?k=k.replace("NO SEARCH RESULT",K.noSearchResultTpl):K.noSearchResult&&(k=k.replace("NO SEARCH RESULT",K.noSearchResult)),z=u(k),I.append(y),J.append(z)),"true"===x.actionsBox&&L&&(K.selectAllTpl?l=l.replace("SELECT ALL",K.selectAllTpl):K.selectAll&&(l=l.replace("SELECT ALL",K.selectAll)),K.deselectAllTpl?l=l.replace("DESELECT ALL",K.deselectAllTpl):K.selectAll&&(l=l.replace("DESELECT ALL",K.deselectAll)),A=u(l),I.append(A)),H.children().eq(0).append(F()),I.append(J),m.append(H),m.append(I),function(d,e,f,g){function h(){var a,b,c=N.children(),d=c.length;for(a=0;d>a;a++)if(b=c.eq(a),b.hasClass("active")&&b.hasClass("nya-bs-option"))return b;return null}function j(a){for(var b,c=a.childNodes,d=c.length,e=0;d>e;e++)if(b=c[e],1===b.nodeType&&"a"===b.tagName.toLowerCase()){b.focus();break}}function k(a){var b;b=N.children().eq(a?0:N.children().length-1);for(var c=0;c<N.children().length;c++)if(N.children().eq(c).hasClass("selected"))return N.children().eq(c)[0];return!b.hasClass("nya-bs-option")||b.hasClass("disabled")||b.hasClass("not-match")?a?l(b[0],"nextSibling"):l(b[0],"previousSibling"):b[0]}function l(a,b){if(!a||r(a,"nya-bs-option")){for(var c=a;(c=i(c,b))&&c.nodeType;)if(r(c,"nya-bs-option")&&!r(c,"disabled")&&!r(c,"not-match"))return c;return null}}function m(a){if(J&&!H){var b,c,e;if(b=N.find("li"),b.length>0){c=E.$modelValue,e=Array.isArray(c)?w(c):[];for(var f=0;f<b.length;f++){var g=u(b[f]);if(!g.hasClass("disabled")){var h,i;h=x(g),"undefined"!=typeof h&&(i=o(e,h),a&&-1==i?(e.push(h),g.addClass("selected")):a||-1==i||(e.splice(i,1),g.removeClass("selected")))}}E.$setViewValue(e),d.$digest(),z()}}}function q(a){var b,c,f,g=E.$modelValue;b=x(a),"undefined"!=typeof b&&(J?(c=Array.isArray(g)?w(g):[],f=o(c,b),-1===f?(c.push(b),a.addClass("selected")):(c.splice(f,1),a.removeClass("selected"))):(N.children().removeClass("selected"),c=b,a.addClass("selected"))),E.$setViewValue(c),d.$digest(),J||(e.hasClass("open")&&e.triggerHandler("blur"),e.removeClass("open")),z()}function x(a){var b;return D?(b=a.scope(),D(b)):G.valueIdentifier||G.keyIdentifier?(b=a.scope(),b[G.valueIdentifier]||b[G.keyIdentifier]):a.attr("value")}function y(a){var b=a.find("a");return 0===b.children().length||b.children().eq(0).hasClass("check-mark")?b[0].firstChild.cloneNode(!1):b.children().eq(0)[0].cloneNode(!0)}function z(){var a=E.$modelValue;e.triggerHandler("change");var b=L.children().eq(0);return"undefined"==typeof a?(b.empty(),void b.append(F())):void(J&&0===a.length?(b.empty(),b.append(F())):c(function(){var c,d,e,g,h,i,j=N.children(),k=j.length,l=[];if(J&&"count"===f.selectedTextFormat?i=1:J&&f.selectedTextFormat&&(h=f.selectedTextFormat.match(/\s*count\s*>\s*(\d+)\s*/))&&(i=parseInt(h[1],10)),"undefined"!=typeof i&&a.length>i)return b.empty(),void b.append(K.numberItemSelectedTpl?u(K.numberItemSelectedTpl.replace("%d",a.length)):K.numberItemSelected?document.createTextNode(K.numberItemSelected.replace("%d",a.length)):document.createTextNode(a.length+" items selected"));for(e=0;k>e;e++)d=j.eq(e),d.hasClass("nya-bs-option")&&(c=x(d),J?Array.isArray(a)&&n(a,c)&&(g=d.attr("title"),l.push(g?document.createTextNode(g):y(d))):v(a,c)&&(g=d.attr("title"),l.push(g?document.createTextNode(g):y(d))));if(0===l.length)b.empty(),b.append(F());else if(1===l.length)b.empty(),b.append(l[0]);else for(b.empty(),e=0;e<l.length;e++)b.append(l[e]),e<l.length-1&&b.append(document.createTextNode(", "))}))}function A(){var a,b,c=N.find("li"),d=c.length;for(b=0;d>b;b++)if(a=c.eq(b),a.hasClass("nya-bs-option")||a.attr("nya-bs-option")){B=a[0].clientHeight;break}if(/\d+/.test(f.size)){var e=parseInt(f.size,10);N.css("max-height",e*B+"px"),N.css("overflow-y","auto")}}var B,C,D,E=g[0],G=g[1],H=!1,I=a(G.valueExp),J="undefined"!=typeof f.multiple,L=s(e,["dropdown-toggle"]),M=L.next(),N=s(M,["dropdown-menu","inner"]),O=s(M,["bs-searchbox"]),P=s(N,["no-search-result"]),Q=s(M,["bs-actionsbox"]);G.valueExp&&(D=function(a,b){return I(a,b)}),G.setId(e.attr("id")),J&&(G.isMultiple=!0,E.$isEmpty=function(a){return!a||0===a.length}),"undefined"!=typeof f.disabled&&d.$watch(f.disabled,function(a){a?(L.addClass("disabled"),C=L.attr("tabindex"),L.attr("tabindex","-1"),H=!0):(L.removeClass("disabled"),C?L.attr("tabindex",C):L.removeAttr("tabindex"),H=!1)}),G.onCollectionChange=function(a){var b,c,e=[],f=E.$modelValue;if(f){if(a&&0!==a.length){if(D)for(b=0;b<a.length;b++)e.push(D(d,a[b]));else for(b=0;b<a.length;b++)G.valueIdentifier?e.push(a[b][G.valueIdentifier]):G.keyIdentifier&&e.push(a[b][G.keyIdentifier]);if(J){for(c=f.length,b=0;b<f.length;b++)n(e,f[b])||(f.splice(b,1),b--);c!==f.length&&(f=w(f))}else n(e,f)||(f=e[0])}else f=J?[]:null;E.$setViewValue(f),z()}},N.on("click",function(a){if(!H&&!u(a.target).hasClass("dropdown-header")){var b,c=p(a.target,N[0],"nya-bs-option");if(null!==c){if(b=u(c),b.hasClass("disabled"))return;q(b)}}}),b.on("click",function(a){null===p(a.target,e.parent()[0],e[0])&&(e.hasClass("open")&&e.triggerHandler("blur"),e.removeClass("open"))}),L.on("blur",function(){e.hasClass("open")||e.triggerHandler("blur")}),L.on("click",function(){var a;e.toggleClass("open"),e.hasClass("open")&&"undefined"==typeof B&&A(),"true"===f.liveSearch&&e.hasClass("open")?(O.children().eq(0)[0].focus(),a=k(!0),a&&(N.children().removeClass("active"),u(a).addClass("active"))):e.hasClass("open")&&(a=k(!0),a&&j(a))}),"true"===f.actionsBox&&J&&(Q.find(".bs-select-all").on("click",function(){m(!0)}),Q.find(".bs-deselect-all").on("click",function(){m(!1)})),"true"===f.liveSearch&&O.children().on("input",function(){var a,b,c,d=O.children().val(),e=0,f=N.children(),g=f.length;if(d){for(a=0;g>a;a++)b=f.eq(a),b.hasClass("nya-bs-option")&&(t(b.find("a"),d)?(b.removeClass("not-match"),e++):b.addClass("not-match"));0===e?P.addClass("show"):P.removeClass("show")}else{for(a=0;g>a;a++)b=f.eq(a),b.hasClass("nya-bs-option")&&b.removeClass("not-match");P.removeClass("show")}c=k(!0),c&&(f.removeClass("active"),u(c).addClass("active"))}),E.$render=function(){var a,b,c=E.$modelValue,d=N.children(),e=d.length;if("undefined"==typeof c)for(a=0;e>a;a++)d.eq(a).hasClass("nya-bs-option")&&d.eq(a).removeClass("selected");else for(a=0;e>a;a++)d.eq(a).hasClass("nya-bs-option")&&(b=x(d.eq(a)),J?n(c,b)?d.eq(a).addClass("selected"):d.eq(a).removeClass("selected"):v(c,b)?d.eq(a).addClass("selected"):d.eq(a).removeClass("selected"));z()},e.on("keydown",function(a){var b=a.keyCode;if(27===b||13===b||38===b||40===b){if(a.preventDefault(),H)return void a.stopPropagation();var c,d,g,i,m=p(a.target,e[0],L[0]);"true"===f.liveSearch?d=p(a.target,e[0],O[0]):c=p(a.target,e[0],M[0]),m?13!==b&&38!==b&&40!==b||e.hasClass("open")||(a.stopPropagation(),e.addClass("open"),"undefined"==typeof B&&A(),"true"===f.liveSearch?(O.children().eq(0)[0].focus(),i=k(!0),i&&(N.children().removeClass("active"),u(i).addClass("active"))):(i=k(!0),i&&j(i))):c?27===b?(L[0].focus(),e.hasClass("open")&&e.triggerHandler("blur"),e.removeClass("open"),a.stopPropagation()):38===b?(a.stopPropagation(),i=l(a.target.parentNode,"previousSibling"),i?j(i):(i=k(!1),i&&j(i))):40===b?(a.stopPropagation(),i=l(a.target.parentNode,"nextSibling"),i?j(i):(i=k(!0),i&&j(i))):13===b&&(a.stopPropagation(),g=u(a.target.parentNode),g.hasClass("nya-bs-option")&&(q(g),J||L[0].focus())):d&&(27===b?(L[0].focus(),e.removeClass("open"),a.stopPropagation()):38===b?(a.stopPropagation(),g=h(),g&&(i=l(g[0],"previousSibling"),i?(g.removeClass("active"),u(i).addClass("active")):(i=k(!1),i&&(g.removeClass("active"),u(i).addClass("active"))))):40===b?(a.stopPropagation(),g=h(),g&&(i=l(g[0],"nextSibling"),i?(g.removeClass("active"),u(i).addClass("active")):(i=k(!0),i&&(g.removeClass("active"),u(i).addClass("active"))))):13===b&&(g=h(),g&&(q(g),J||L[0].focus())))}})}}}}]),y.directive("nyaBsOption",["$parse",function(a){var b=/^\s*(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/;return{restrict:"A",transclude:"element",priority:1e3,terminal:!0,require:["^nyaBsSelect","^ngModel"],compile:function(c,i){var j=i.nyaBsOption,o=document.createComment(" end nyaBsOption: "+j+" "),p=j.match(b);if(!p)throw new Error("invalid expression");var q,r,s,t,w,x=i.value,y=x?a(x):null,z=p[3]||p[1],A=p[2],B=p[4],C=p[5]?a(p[5]):null,D=p[6],E={$id:f},F={};return D?t=a(D):(q=function(a,b){return f(b)},r=function(a){return a}),function(a,b,c,f,i){function j(a){var c,f,j,t,x,y,B,C,E,F,H,J,K,L,M=b[0],N=e(),O=[];if(w&&(J=[]),d(a))y=a,x=s||q;else{x=s||r,y=[];for(var P in a)a.hasOwnProperty(P)&&"$"!=P.charAt(0)&&y.push(P);y.sort()}for(B=y.length,C=new Array(B),c=0;B>c;c++)if(f=a===y?c:y[c],j=a[f],t=x(f,j,c),L={},A&&(L[A]=f),L[z]=j,O.push(L),w&&(F=w(f,j),-1===J.indexOf(F)&&F&&J.push(F)),I[t])E=I[t],delete I[t],w&&(E.group=F),E.key=f,E.value=j,N[t]=E,C[c]=E;else{if(N[t])throw C.forEach(function(a){a&&a.scope&&(I[a.id]=a)}),new Error("Duplicates in a select are not allowed. Use 'track by' expression to specify unique keys.");C[c]={id:t,scope:void 0,clone:void 0,key:f,value:j},N[t]=!0,F&&(C[c].group=F)}J&&J.length>0&&(C=g(C,J,"group"));for(var Q in I)E=I[Q],h(E.clone).remove(),E.scope.$destroy();for(c=0;B>c;c++)E=C[c],E.scope?(H=M,k(E)!=H&&u(M).after(E.clone),M=l(E),m(E.scope,c,z,E.value,A,E.key,B,E.group)):i(function(a,b){E.scope=b;var d=o.cloneNode(!1);a[a.length++]=d,u(M).after(a),a.addClass("nya-bs-option"),j=p?p(E.key,E.value):E.value||E.key,D.isMultiple?Array.isArray(G.$modelValue)&&n(G.$modelValue,j)&&a.addClass("selected"):v(j,G.$modelValue)&&a.addClass("selected"),M=d,E.clone=a,N[E.id]=E,m(E.scope,c,z,E.value,A,E.key,B,E.group)}),J&&(K&&K===E.group?E.clone.removeClass("first-in-group"):E.clone.addClass("first-in-group"),K=E.group,E.clone.addClass("group-item"));I=N,D.onCollectionChange(O)}var p,D=f[0],G=f[1],H={};t&&(s=function(b,c,d){return A&&(E[A]=b),E[z]=c,E.$index=d,t(a,E)}),C&&(w=function(b,c){return A&&(F[A]=b),F[z]=c,C(a,F)}),A&&(D.keyIdentifier=A),z&&(D.valueIdentifier=z),y&&(D.valueExp=x,p=function(b,c){return A&&(H[A]=b),H[z]=c,y(a,H)});var I=e();"true"===c.deepWatch?a.$watch(B,j,!0):a.$watchCollection(B,j)}}}}])}();